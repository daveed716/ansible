server {
	listen 8100 ssl http2;
	#listen [::]:443 ssl http2;
	server_name {{nginx_site_name}};
	root /var/www/{{nginx_site_name}}/public;

	# SSL
	ssl_certificate /etc/nginx/ssl/ssl.crt;
	ssl_certificate_key /etc/nginx/ssl/private.key;

	# reverse proxy
	location / {
		proxy_pass http://{{nginx_camera_server}}:8100;
		include nginxconfig.io/proxy.conf;
	}

	#include nginxconfig.io/general.conf;
}

server {
        listen 8101;
        server_name {{nginx_site_name}};
        root /var/www/{{nginx_site_name}}/public;

        # reverse proxy
        location / {
                proxy_pass http://{{nginx_camera_server}}:8101/;
                include nginxconfig.io/proxy.conf;
		proxy_pass_request_headers      on;
	}

        #include nginxconfig.io/general.conf;
}


# HTTP redirect
server {
	listen 80;
	listen [::]:80;

	server_name .{{nginx_site_name}};

	return 301 https://{{nginx_site_name}}$request_uri;
}
